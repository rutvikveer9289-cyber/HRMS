<div class="module-view-padding">
  <section class="page-section">
    <div class="onboarding-header-section">
      <div class="header-text">
        <h2>Talent OnBoarding</h2>
        <p>Initialize new employee profiles or bulk sync via Master Excel</p>
      </div>
    </div>

    <div class="onboarding-content">
      <div class="form-card">
        <div class="card-title">
          <i class="lucide-user-plus"></i>
          <span>Manual Identity Entry</span>
        </div>

        <form (ngSubmit)="onSubmit()" #onboardForm="ngForm">
          <div class="form-grid">
            <div class="form-group">
              <label>First Name</label>
              <input type="text" name="firstName" [(ngModel)]="employee.first_name" (input)="onNameChange()" required
                placeholder="First Name" />
            </div>
            <div class="form-group">
              <label>Last Name</label>
              <input type="text" name="lastName" [(ngModel)]="employee.last_name" (input)="onNameChange()" required
                placeholder="Last Name" />
            </div>
            <div class="form-group full-width">
              <label>Display Name (Full Name)</label>
              <input type="text" name="fullName" [(ngModel)]="employee.full_name" required readonly />
            </div>
            <div class="form-group">
              <label>Employee ID</label>
              <input type="text" name="empId" [(ngModel)]="employee.emp_id" required readonly class="readonly-input" />
            </div>
            <div class="form-group">
              <label>Designation</label>
              <input type="text" name="designation" [(ngModel)]="employee.designation" required
                placeholder="Designation" />
            </div>
            <div class="form-group">
              <label>Office Email</label>
              <input type="email" name="email" [(ngModel)]="employee.email" required placeholder="Email" />
              <small>Auto-suggested based on name</small>
            </div>
            <div class="form-group">
              <label>Phone Number</label>
              <input type="tel" name="phone" [(ngModel)]="employee.phone_number" (keypress)="onlyNumbers($event)"
                required pattern="[0-9]{10,15}" placeholder="Phone Number" title="Please enter 10-15 digits only" />
            </div>
          </div>

          <!-- Document Repository -->
          <div class="doc-section">
            <div class="section-title-alt">
              <i class="lucide-file-text"></i>
              <span>Digital Repository (Mandatory Documents)</span>
            </div>
            <div class="doc-grid">
              <div class="doc-item" *ngFor="let doc of documents" [class.uploaded]="doc.uploaded">
                <div class="doc-info">
                  <span class="doc-name">{{ doc.name }}</span>
                  <span class="doc-status" *ngIf="doc.uploaded">âœ“ Selection Ready</span>
                  <span class="doc-status pending" *ngIf="!doc.uploaded">Required</span>
                </div>
                <div class="doc-actions">
                  <button type="button" class="btn-doc upload" *ngIf="!doc.uploaded" (click)="docInput.click()">
                    Selection
                  </button>
                  <button type="button" class="btn-doc remove" *ngIf="doc.uploaded" (click)="removeFile(doc)">
                    Remove
                  </button>
                  <input type="file" #docInput (change)="onFileSelected($event, doc)" hidden />
                </div>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn-cancel" (click)="resetForm()">
              Reset Fields
            </button>
            <button type="submit" class="btn-save" [disabled]="!onboardForm.valid || loading">
              <span *ngIf="!loading">Confirm & OnBoard</span>
              <span *ngIf="loading">Processing...</span>
            </button>
          </div>
        </form>
      </div>

      <!-- Sidebar Column -->
      <div class="sidebar-column">
        <!-- Directives Card -->
        <div class="directives-card">
          <h3>Quick Directives</h3>
          <ul>
            <li>
              <i class="lucide-info"></i> IDs are sequentially assigned based on
              system logic.
            </li>
            <li>
              <i class="lucide-info"></i> Master Excel updates designations and
              contact info for existing IDs.
            </li>
            <li>
              <i class="lucide-info"></i> Onboarding triggers credentials
              availability for employees.
            </li>
          </ul>

          <div class="nav-back">
            <a routerLink="/dashboard"><i class="lucide-arrow-left"></i> Return to Analytics</a>
          </div>
        </div>

        <!-- Sync Actions Card -->
        <div class="sync-card" *ngIf="canSync">
          <h4>Master Sync Actions</h4>
          <button class="btn-sync" (click)="fileInputMaster.click()">
            <i data-lucide="upload-cloud"></i>
            <span>{{ uploadingMaster ? "Syncing..." : "Sync Master" }}</span>
          </button>
          <input type="file" #fileInputMaster (change)="onEmployeeMasterSelected($event)" hidden accept=".xls, .xlsx" />
          <button class="btn-template" (click)="downloadTemplate()" title="Get Excel Format">
            <i data-lucide="download"></i>
            <span>Template</span>
          </button>
          <span class="instruction-text centered">Use this template file to Sync Master</span>
        </div>
      </div>
    </div>
  </section>
</div>